# ============================================
# GOOGLE CLOUD PLATFORM CONFIGURATION
# SmartMetal Pricer - GCP Migration
# Generated: 2025-12-30
# ============================================

# GCP Project
GCP_PROJECT_ID=helpful-aurora-482800-v8
GCP_REGION=us-central1
GCP_LOCATION=us-central1

# Authentication
# For local development: Run 'gcloud auth application-default login'
# For production: Mount service account key and set path below
GOOGLE_APPLICATION_CREDENTIALS=c:\Users\Administrator\Desktop\Pricer\backend\gcp-credentials.json

# ============================================
# VERTEX AI (replaces Azure OpenAI)
# ============================================
VERTEX_AI_LOCATION=us-central1
VERTEX_AI_MODEL=gemini-3-pro-preview

# Model selection (based on what's ACTUALLY available in your project):
# - gemini-3-pro-preview (65K output tokens) ‚Üê CURRENT - Handles large RFQs
# - gemini-2.0-flash-exp (8K output tokens) - Faster but fails on large docs
# - gemini-2.5-pro - Available but truncates at ~300 chars (needs Provisioned Throughput purchase)
# - gemini-3-flash-preview (check availability)
# - gemini-2.5-flash-preview (check availability)
#
# NOTE: gemini-1.5-pro and gemini-1.5-pro-002 NOT available in your project

# ============================================
# DOCUMENT AI (replaces Azure Document Intelligence)
# ============================================
DOCUMENT_AI_PROCESSOR_ID=29c06afe746fcae2
DOCUMENT_AI_LOCATION=us

# ============================================
# CLOUD STORAGE (replaces Azure Blob Storage)
# ============================================
GCS_RFQ_BUCKET=helpful-aurora-482800-v8-rfq-documents
GCS_EXTRACTED_BUCKET=helpful-aurora-482800-v8-extracted-data

# ============================================
# CLOUD PUB/SUB (replaces Azure Service Bus)
# ============================================
PUBSUB_EXTRACTION_TOPIC=document-extraction-topic
PUBSUB_EXTRACTION_SUBSCRIPTION=document-extraction-sub
PUBSUB_PARSING_TOPIC=ai-parsing-topic
PUBSUB_PARSING_SUBSCRIPTION=ai-parsing-sub

# ============================================
# MEMORYSTORE REDIS (replaces Azure Cache for Redis)
# ============================================
REDIS_HOST=10.147.180.67
REDIS_PORT=6379
REDIS_ENABLED=true

# Note: No password needed for Memorystore in VPC
# If you enable AUTH, add: REDIS_PASSWORD=your-password

# ============================================
# DOCUMENT PROCESSING SETTINGS
# ============================================
MAX_PDF_PAGES_TO_PROCESS=100
ENABLE_DI_CHUNKED_FALLBACK=true
DI_CHUNK_SIZE=10
DI_PARTIAL_RESULT_THRESHOLD=5

# ============================================
# SUPABASE DATABASE (no change from Azure setup)
# ============================================
DATABASE_URL=postgresql://smartmetal_app:Sm%40rtMetal2025@db.uoijuikdqlcyavzxkgxi.supabase.co:5432/postgres
MIGRATION_DATABASE_URL=postgresql://postgres:%40Fareha2025@db.uoijuikdqlcyavzxkgxi.supabase.co:5432/postgres
SUPABASE_URL=https://yotwggqpcbpvhenmahlf.supabase.co

SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvdHdnZ3FwY2Jwdmhlbm1haGxmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4OTA4NDgsImV4cCI6MjA3OTQ2Njg0OH0.f-kmD8FnX1bh6tdh1ct1HGoZxFhE3_roXLWtqJF7HiY
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvdHdnZ3FwY2Jwdmhlbm1haGxmIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mzg5MDg0OCwiZXhwIjoyMDc5NDY2ODQ4fQ.M98wt8I7Y-8weFWRlGnTGwa-IPjQPZu2QwmPqX5jZfk

# ============================================
# APPLICATION SETTINGS
# ============================================
PORT=3001
NODE_ENV=production

# ============================================
# SMTP CONFIGURATION (optional - for email notifications)
# ============================================
# TODO: Add your SMTP credentials if using email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=

# Email sender configuration
EMAIL_FROM=noreply@smartmetal.com
EMAIL_FROM_NAME=SmartMetal Pricer

# ============================================
# MONITORING & LOGGING (optional)
# ============================================
# Enable detailed logging
LOG_LEVEL=info

# Sentry (if using)
# SENTRY_DSN=https://xxx@sentry.io/xxx

# ============================================
# SECURITY
# ============================================
JWT_SECRET=8fda040908ee46b0425a20782337e1fa
SESSION_SECRET=gcp-migration-2025-smartmetal-pricer-session-secret-a8f3d92c

# CORS settings
CORS_ORIGIN=http://localhost:3000,https://yourdomain.com

# ============================================
# NOTES
# ============================================
# 1. For local development:
#    - Run: gcloud auth application-default login
#    - Comment out GOOGLE_APPLICATION_CREDENTIALS
#
# 2. For production deployment:
#    - Download service account key (if org policy allows)
#    - Or use Workload Identity for Cloud Run/GKE
#
# 3. Redis connection:
#    - Memorystore is only accessible from VPC
#    - Ensure your app runs in the same VPC/region
#
# 4. Cost optimization:
#    - Use gemini-1.5-flash-002 for cheaper AI costs
#    - Set up Cloud Storage lifecycle policies
#    - Monitor usage in Cloud Console
GEMINI_API_KEY=AIzaSyBb-WoyR0ScjGr3m3QTU5Y0VppEXLCrdVA
GEMINI_FORCE_FALLBACK=true
# Disabled - using Vertex AI instead (no 10 RPM limit)

# ============================================
# CLOUD TASKS
# ============================================
GCP_SERVICE_ACCOUNT_EMAIL=smartmetal-pricer@helpful-aurora-482800-v8.iam.gserviceaccount.com
CLOUDTASKS_EXTRACTION_QUEUE=document-extraction-queue
CLOUDTASKS_TARGET_URL=https://davon-tetartohedral-arianna.ngrok-free.dev/api/ai/process-extraction-taskhttps://davon-tetartohedral-arianna.ngrok-free.dev/api/ai/process-extraction-task
